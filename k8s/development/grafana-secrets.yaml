# Se puede combinar estas dos opciones utilizando export o source.
# Puede que quiz치s `source .secrets.env && ...` no funcione, por lo que,
# quiz치s sea mejor exportar las variables de entorno antes de ejecutar el comando.

apiVersion: v1
kind: Secret
metadata:
  name: grafana-secret
  namespace: development
  labels:
    app: simple-crud
    component: grafana
    environment: development
type: Opaque
stringData:
  GRAFANA_PASSWORD: ${GRAFANA_PASSWORD}

# Opci칩n 1 (sin envsubst)

# kubectl create secret generic grafana-secret \
# --from-literal GRAFANA_PASSWORD=${GRAFANA_PASSWORD} \
# --namespace development

# Opci칩n 2 (con envsubst)

# envsubst < k8s/development/grafana-secrets.yaml | kubectl apply -f - --namespace development
